<!-- ===============================================
 Puzzle-Code shell  – generic layout for all puzzles
==================================================== -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzle Code</title>

  <style>
    :root {
      --cell: 48px;
      --gap: 12px;
    }
    body  { font-family: system-ui, sans-serif; margin: .75in auto; display:flex; flex-direction:column; align-items:center; }
    h1    { margin: 0 0 .15in; font-size: 20pt; }
    h2    { margin: 0 0 .15in; font-size: 16pt; }

/* Toolbar (screen only) */
.toolbar {
  display:flex;
  flex-wrap: nowrap;      /* ← keep all controls on one row */
  overflow-x: auto;       /* ← allow horizontal scroll on very narrow phones */
  gap:1rem;
  margin-bottom:1.25rem;
  align-items:flex-end;
  justify-content:center;          /* keep the whole row centred */
}

/* every direct child (labels & buttons) ⇒ no auto-stretch          */
.toolbar > * { flex: 0 auto; }

/* label now lays out "text  select" left-to-right                   */
.toolbar label{
  display:flex;
  flex-direction:row;          /* ‹— was column              */
  align-items:center;          /* vertically center text      */
  gap:.4rem;                   /* space between text & select */
  font-size:.9rem;
  /* no max-width rule — let real width rule itself */
}

/* dropdown hugs text width                                          */
.toolbar label select{
  width:auto;           /* hug text */
  max-width:9rem;       /* but never grow absurdly wide */
}

/* buttons hug their text (unchanged)                                */
.toolbar button{
  padding:.4rem .85rem;
  font-size:.95rem;
}

/* keep labels from stretching in print‑PDF layout */
@media print{
  .toolbar{display:none!important;}
}

    /* Puzzle card */
    .puzzle { display:inline-block;margin:var(--gap);padding:.5rem .25rem .9rem;border:1px solid #bbb;border-radius:6px;text-align:center;page-break-inside:avoid; }
    .title  { font-weight:600;margin:.15rem 0 .35rem;font-size:1.35rem; }

    /* Grid */
    .grid{
      position:relative;
      display:grid;
      margin:0 auto .5rem;
      border:1px dotted #666;

    /* fixed 48-px matrix, prevents giant apples */
      **grid-template-columns: repeat(auto-fill, var(--cell));**
      **grid-auto-rows       : var(--cell);**
    }


    .cell { position:relative;width:var(--cell);height:var(--cell);box-sizing:border-box;border:1px dotted #ccc; }
    .cell img { max-width:80%;max-height:80%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);user-select:none;pointer-events:none; }
    .solBox { position:absolute;border:4px solid crimson;pointer-events:none; }
    .metaRow { display:flex;justify-content:space-between;font-size:1.05rem;align-items:center; }

    /* Wrapper for puzzle cards */
    .sheet { width:100%; display:flex; flex-wrap:wrap; justify-content:center; }

    @media print {
      body{margin:.5in auto;}
      .toolbar, #exportNotice{display:none!important;}
      h1,h2{margin:0 auto .15in;}
      .puzzle{break-inside:avoid;}
    }

  </style>
</head>
<body>
  <h1 id="pageTitle">Puzzle Code</h1>
  <h2 id="gridSizeTitle"></h2>


  <div class="toolbar">
   <!-- puzzle-specific controls will be injected here -->
  <div id="controls"></div>

  </div>

  <div id="puzzleArea" class="sheet"></div>
  <p id="exportNotice" style="display:none;font-style:italic;margin-top:2rem;">Exporting PDF… please wait.</p>

  <script type="module" src="/src/main.js"></script>

</body>
</html>